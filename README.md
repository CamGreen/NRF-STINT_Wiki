# Welcome to the Stitching the City: From Micro-data to Macro-views wiki.

This wiki is managed by the Department of Geography, Geoinformatics and Meteorology at the University of Pretoria. For any issues or comments, contact [Cameron Green](cameron.green@tuks.co.za).

To access the Stitching the City Digital Library, https://geocatalogue.co.za

<!-- Here are some notes....
The ToC is automatically generated if there are more than 3 headings (I think) on a page.

This is a list:
* one
* two

This is also list:
# one
# two

This is how you create an external link, [https://geocatalogue.co.za Geocatalogue]
This is how you link to an internal page using the [page_name]


This is how you add a figure into the wiki (the upload is on the side menu (Upload file):

[[File:Prod req-820x261.gif|center|800px|alt text]]

I have used this [https://www.tablesgenerator.com/mediawiki_tables site] to create a table:

{| class="wikitable"
! id
! name
! surname
|-
| 1
| victoria
| rautenbach
|-
| 2
| cameron
| green
|-
| 3
| azile
| mdleleni
|}

-->

## Data collection tools 
### When to use these types of data collection tools 
Tools such as [EpiCollect5](https://five.epicollect.net), [OpenStreetMap (OSM)](https://www.openstreetmap.org), [Field papers](http://fieldpapers.org), [Java openStreetMap (JOSM)](https://josm.openstreetmap.de) and [Maptionnaire](https://maptionnaire.com) are commonly used to collect data in the field or from behind a computer. Typically EpiCollect5, Field papers and Maptionnaire are used for collecting data from the field in the form of a questionnaire and OpenStreetMap (OSM) and Java openStreetMap (JOSM) are used for creating data from behind a desktop computer.

Carrying a laptop when conducting fieldwork can be a pain so having mobile applications that can do data collection is useful. These tools allow you to create a questionnaire that can be downloaded to your phone and filled in later. After fieldwork, you can then upload the data to the internet over WiFi and access the data via your computer. This data can then be shared with others and they can then use it or edit it.

These forms or questionnaires can be edited in many different ways and customised to suit any data collection need. Depending on your needs, these forms can be very useful when it comes to collecting data for a specific purpose or a specific need.

### KoBoToolbox
[KoBoToolbox](https://www.kobotoolbox.org) is an integrated set of tools for building forms and collecting interview responses. It is built by the Harvard Humanitarian Initiative for easy and reliable use in difficult field settings, such as humanitarian emergencies or post-conflict environments. The administration interface is available via the web, and the data collection application can be used on an Android phone and via the browser on other phones.

You can access the KoBoToolbox Help Centre [here](http://support.kobotoolbox.org/en/) or use the sub-links below.

#### Setting up a project:

The KoBoToolbox Help Centre has various pages to help you set up your first project:
* Quick start overview, http://support.kobotoolbox.org/en/articles/592369-quick-start-overview
* An overview of the response types available, http://support.kobotoolbox.org/en/articles/592418-list-of-question-types
* Overview of all Formbuilder Functions, http://support.kobotoolbox.org/en/articles/592370-overview-of-all-formbuilder-functions
* How to deploy a form to start a new data collection project, http://support.kobotoolbox.org/en/articles/592380-how-to-deploy-a-form-to-start-a-new-data-collection-project

#### Using the app:

The KoBoToolbox Help Centre has various pages to help you collect data using your device:
* Recommended Devices for Data Collection, http://support.kobotoolbox.org/en/articles/592390-recommended-devices-for-data-collection
* Collecting GPS Locations, http://support.kobotoolbox.org/en/articles/592371-collecting-gps-locations
* Collecting Data through Web Forms, http://support.kobotoolbox.org/en/articles/592441-collecting-data-through-web-forms
* Troubleshooting Enketo Web Forms, http://support.kobotoolbox.org/en/articles/592384-troubleshooting-enketo-web-forms

#### Viewing and downloading the collected data:

The KoBoToolbox Help Centre has various pages to help you view and download the data collected:
* Exporting and uploading your data to GIS software, http://support.kobotoolbox.org/en/articles/3162111-exporting-and-uploading-your-data-to-gis-software
* How to edit or delete a single submission, http://support.kobotoolbox.org/en/articles/1978566-how-to-edit-or-delete-a-single-submission
* Viewing and Creating Custom Reports, http://support.kobotoolbox.org/en/articles/2847676-viewing-and-creating-custom-reports
* Exporting and Downloading Your Data, http://support.kobotoolbox.org/en/articles/592442-exporting-and-downloading-your-data
* Converting your Data into SPSS and/or Stata, http://support.kobotoolbox.org/en/articles/2029505-converting-your-data-into-spss-and-or-stata
* Pulling your data into Excel Power Query, http://support.kobotoolbox.org/en/articles/1559346-pulling-your-data-into-excel-power-query
* Pulling your data into PowerBI, http://support.kobotoolbox.org/en/articles/1841861-pulling-your-data-into-powerbi

### EpiCollect5 
[EpiCollect5](https://five.epicollect.net) is a mobile and web application for free and easy data collection where users can create a project, collect their data (online or offline) and then view, analyse and export their data. It is a free download from the Google Play Store and the App Store. A full guide on how to use EpiCollect5 can be found [here](https://epicollect5.gitbooks.io/epicollect5-user-guide/content/) or use the sub-links below.

#### Setting up a project:
To set up a project with EpiCollect5, navigate to the homepage and follow the instructions [here](https://five.epicollect.net/more-create) or watch the video [here](https://youtu.be/9NlfySzLdPY).

*Some useful tips:*
* Make use of the many available question types such as drop-downs, radio buttons, checkboxes and text boxes.
* Geotag your entries adding a location as this adds a spatial value to your entries.
* Add photos, voice recordings and even videos to your project to help capture what you are trying to record.
* Remember to make your project listed so that it can be found later when you search for the project in the application.
* If you make a project as a 'Private' project, then remember to share it with the other users using your project so they can access it. It is easier to leave it as a public project but the decision is up to the user and also depends on the security needs.

#### Using the app:
Download the EpiCollect5 application to your smartphone and add the project before going into the field to save data costs. More can be read on this [here](https://five.epicollect.net/more-collect) or follow [this link](https://youtu.be/WQhUJfk_oPg) to a short video.

*Some useful tips:*
* Only upload all your data to the EpiCollect5 server once you are back and have connected to a WiFi network.
* If you are using the location option, run it twice to get the best possible location (i.e. most accurate).
* Be as descriptive as possible as it is easier to leave out collected information than try to use information that wasn't collected.
* If you are planning on being out for a long day, it is useful to have a powerbank to on hand or another device that has access to the project.

#### Viewing and downloading the collected data:
To view the data that was collected during the field work, make your way to the project home page. More information about this can be found [here](https://five.epicollect.net/more-view) or follow this short [video](https://youtu.be/o1MgIdFqN5U).

*Some useful tips:*
* The data can be downloaded as a CSV file or a JSON, both these files can be converted to Shapefiles in QGIS for later use.
* Convert your CSV file to an Excel document as that can be uploaded to GeoNode for proper document storage.
* Try to keep the editing of the data as little as possible.

### OpenStreetMap (OSM) 
[OpenStreetMap (OSM)](https://www.openstreetmap.org/#map=6/-28.676/24.677) is an openly-licensed geospatial database created and edited daily by volunteers worldwide, and used by a multitude of actors and for a variety of applications [(Coetzee et al. 2018)](https://www.int-arch-photogramm-remote-sens-spatial-inf-sci.net/XLII-4-W8/35/2018/isprs-archives-XLII-4-W8-35-2018.pdf). More can be read about OSM on their [Wiki page](https://wiki.openstreetmap.org/wiki/Main_Page).

#### Creating an account:
Before you can start editing and contributing map data, you first need to create an account with OSM. This is a simple procedure and can be done [here](https://www.openstreetmap.org/user/new). Watch this [video](https://youtu.be/VVBw5BfBOXY) for more information.

#### How to edit:
Editing data on OSM is also a fairly easy process. There are a lot of tips and helpful advise on the internet and groups, a good place to start for advise on hw to contribute can be found [here](https://wiki.openstreetmap.org/wiki/Contribute_map_data). Alternatively, you can watch this short [video](https://youtu.be/Lf4UjJqBsvU) on editing map data.

*Some tips for editing:*
* Be as accurate as possible to ensure good quality data.
* Take your time when it comes to editing as there is no prize for finishing quickly.
* Try to add tags and comments when possible.

#### How to download data from OSM:
Downloading data from OSM is a fairly easy process and can be done in many different ways. 

* Data can be easily downloaded directly from the [OpenStreetMap (OSM)](https://www.openstreetmap.org/#map=6/-28.676/24.677) site by clicking the `Export` button in the top left hand corner and then selecting the area on where you wish to get data for. 
* Data can also be downloaded from [GeoFabrik](https://download.geofabrik.de/index.html). Select the area for where you wish to download the data. More details on the files you can download can be found [here.](http://download.geofabrik.de/technical.html)
* Another tool for downloading data is the [HOT Export Tool](https://export.hotosm.org/en/v3/). To use this tool, you are required to have an OSM account. Log in and then select the area you wish to download and what features you want downloaded. More information on how to use this tool can be found [here.](https://export.hotosm.org/en/v3/learn)
* Similar to GeoFabrik, [Planet OSM](https://planet.openstreetmap.org) allows you to download OSM data depending on the area of your choosing. Navigating to [here](https://planet.openstreetmap.org/planet/) allows you to select what year of the data you would like. For the most recent data, you can select the current year but for historical data, you can select another year. 
* The [Overpass-Turbo Tool](https://overpass-turbo.eu) is the most complicated tool out of the above to download OSM data. You need to create a query using the `Wizard` to select the data you want to download in the area you want. To get more information how to use this tool, select `Help` in the top ribbon. 

### Field papers and JOSM 
[Field Papers](http://fieldpapers.org) is a web-based tool that is used for easily creating a printable map atlas for anywhere in the world that you can print and add notes to. It is a low-tech and easy way to edit OSM. More about Field Papers can be found [here](https://wiki.openstreetmap.org/wiki/Field_Papers).

[Java OpenStreetMap (JOSM)](https://josm.openstreetmap.de) is a free desktop editing tool for OSM. It has a lot of advanced features that are present in the typical iD editor but it is also a more complicated user interface. Read more [here](https://en.wikipedia.org/wiki/JOSM).

Field Papers and JOSM are linked in terms of creating and editing data. You use Field Papers to generate an atlas of an area you wish to map. You then print this map and go out into the area and map the unmapped features in that area. You then come back and scan the atlas into your computer and open it in JOSM. There is a unique barcode on each of the pages of the atlas and these barcodes are georeferenced to the area. JOSM picks up these barcodes and automatically places the atlas in the correct area without you having to do any georeferencing. From there you simply digitise the data into JOSM and upload it to OSM.

### Maptionnaire 
[Maptionnaire](https://maptionnaire.com) is a map-based survey tool that is simple and effective for public use. The online questionnaire editor allows for the creation, customisation and publishing of survey projects. Maptionnaire allows for planners and researchers to collect, analyse, and visualise map-based data. It works in a very similar fashion to EpiCollect5 as you create questionnaires, collect data and then visualise and download the data.

## Overview of GeoNode (Stitching the City) 
### What is GeoNode? 
[GeoNode](http://geonode.org) is an open source platform that facilitates the creation, sharing and collaborative use of geospatial and non-geospatial data. It is defined as a web-based application and platform for developing geospatial information systems (GIS) and for deploying spatial data infrastructures (SDI). GeoNode allows for the uploading of vector and raster data as well as other various formats of data through a user-friendly interface.

### Why would you use GeoNode? Why do you need to manage and share your data? 
GeoNode is used to manage and catalogue geospatial data and keep track of metadata related to the data. It has an easy to use interface allowing non-specialised users to share data and create interactive maps. Each dataset in the system can be shared publicly or restricted to allow access to only specific users. Documents that are non-spatial in nature can still be uploaded to GeoNode and then linked to a spatial file afterwards.

Managing and sharing data is important to a successful project especially if the project is occurring over several years such as a longitudinal study. Data that is managed correctly can be used for numerous years after the date of collection as long as it labelled and managed correctly. In this modern era of intelligence, many projects are bilateral and often involve two or more countries which means that sharing data it vital to project success.

### What data can you manage with GeoNode? 
GeoNode can manage most formats of research data that has been collected. GeoNode divides data into two classes, namely, layers and documents.

***Document*** formats that GeoNode supports:
* Microsoft Word (.doc & .docx)
* Microsoft Powerpoint (.ppt & .pptx)
* Microsoft Excel (.xls & .xlsx)
* Image Formats (.gif, .jpg, .jpeg, .png, .tiff, .tif)
* OpenDocument File Formats (.ods, .odt,. odp)
* Portable Document Format (.pdf)
* Compressed Files (.rar, .zip, .gz)
* Markup Langauges (.sld, .xml, .qml)
* Text documents (.txt)

***Layer*** formats that GeoNode supports:
* Shapefiles & its associated files (.cpg, .dbf, .prj, .qpj, .shp, .shx)
* GeoTiffs (.tiff, .tif)
* American Standard Code for Information Interchange (ASCII)

***Please note:***

GeoNode does not support .GeoJOSN or .JSON file formats but they can be easily converted to a file format that GeoNode can support. See link to QGIS conversion tips [here](https://github.com/CamGreen/NRF-STINT_Wiki#converting-between-data-formats) for more information.

## Using Stitching the City (GeoNode) for your data 
For the Stitching the City, we are using GeoNode 2.10. ***To access the site, [click here](https://geocatalogue.co.za).***

```
Please note:

Make sure you are logged into GeoNode before trying to view, upload or edit any documents or layers.
```

### Uploading data:
Before trying to upload data to GeoNode, make sure that the data is compatible with GeoNode. If you are not sure what formats are compatible with GeoNode, please see [What data can you manage with Geonode?](https://github.com/CamGreen/NRF-STINT_Wiki#what-data-can-you-manage-with-geonode) Watch this short [video](https://youtu.be/LJ9kXhONHKY) for a quick guide on uploading data. The video shows how to upload a layer to GeoNode but please note that uploading a document is exactly the same method, there is no difference in the upload method.

*Some tips for uploading data:*
* Select appropriate file names when renaming documents.
* Fill out the metadata as best as you can. See the importance of metadata [here.](https://github.com/CamGreen/NRF-STINT_Wiki#editing-metadata)
* Be as descriptive as possible when filling in the metadata as that will help identify files later.
* If you are unsure of anything in the metadata, rather fill it in and you can fix it later or use the '?' to provide more information.

*Permissions:*
* You can set permissions for each layer, this is important for data security.
* The default is set to 'Anyone', meaning that anyone who can log in can edit the data.
* You can set permissions that single users or a group can view, download, change metadata, edit data, edit styles and manage it.
* To set the permissions, simply type the person's username or the group's name and their username or group name will appear and you can select it.

For more information on editing the metadata using the Wizard, please see [Editing Metadata.](https://github.com/CamGreen/NRF-STINT_Wiki#editing-metadata)

### Viewing and downloading data:
GeoNode has a built in map viewer that allows users to view data on a map with an OpenStreetMap base map. Users can pan around the map, zoom in and out and click a point on the map for more information such as the GPS coordinates or attributes.

The layers can be downloaded as either images (in .jpeg, .PDF and .PNG) or as a data file (as the original dataset, Shapefiles, .gml, .CSV, .xls and .GeoJSON). Many of data formats can be opened in QGIS.

For a short demonstration on how to view and download data, you can watch this [video.](https://youtu.be/OlCdw_c2azk)

### Creating, editing and downloading maps:
GeoNode has the ability to create simple maps that can be easily created, customised and exported as a PDF file. Layers have the ability to be styled, meaning that in simple, the colour of the layer can be changed or more complexly, you can change the whole style.

Another useful tool that GeoNode has, is the ability to measure. You can measure a line distance, an area or a bearing between two points.

When you are ready to print your map, you can start the print process. You need to give your map an appropriate title and description. From there, you can decided on the page size, A3 or A4, and the orientation of the page, portrait or landscape. You can also decide if you want a legend and if you want that legend on the same page or a different page. It is good practice to include the legend on the same page. Changing the resolution can affect the print quality, the higher the dpi, the higher the quality of the map.

Watch this [video](https://youtu.be/mZzElwASL1M) for a brief but full overview on creating maps in GeoNode.

### Editing Metadata:
Metadata is data about data. It is the data about the layer or document you upload, who collected the data, what date it was collected, for what purpose the data was collected and if there are any plans to maintain the data. Be able to create, update, edit and maintain metadata is vital to the quality to the data and possibly, project success over the long term. GeoNode offers the ability to do just this.

Linking your data to categories or keywords is important as it allows users to search effortlessly for the layers or documents they are searching for. Categories and keywords also link data that is similar in nature, keeping similar files in the same location. They also provide an indirect overview of the data, they can tell you about the data without you even having to open the data to see what it is about.

Mentioning who the data belongs to is also important as that person is the owner of the data and work cannot be done on the data without the owner's permission therefore saying who owns the data can help with the editing process and another issues relating to ownership of the data.

Adding comments to the data quality segment is very important as it tells other users about the quality of the data. Is the data accurate? Is the data up to date? Who created the data? Why did they create the data? What was the purpose? When was the data last edited? All of these questions are asked by other users when looking for data therefore having filled in data quality statements answers all of these questions.

All the metadata that you and GeoNode create when you upload a layer or document can be edited. It is a very simple procedure and can be accessed through the *Editing Tools Metadata Wizard*.

Here is a short [video](https://youtu.be/Kdo5caVuwGc) showing you how to access the '*Editing Tools Metadata Wizard* and how to edit.

## Useful tricks with QGIS 
### Converting between data formats:

[QGIS](https://qgis.org/en/site/) is a free and open source geographic information system that allows users to create, edit, visualise, analyse and publish geospatial information on Windows, Mac and Linux. QGIS supports many data formats and can convert between data formats very easily.

#### Converting CSV to SHP: 
This step is important as GeoNode can store Shapefiles but not CSV files therefore converting between the data formats is important and a useful trick to know.
1. Open the CSV file in QGIS by opening the 'Layer' tab, select 'Add Layer' then 'Add delimited text layer'.
2. Assign the correct values to the X and Y fields otherwise your data will be inverted or not display at all.
3. Make sure that your project is at WGS 84 to ensure that the data is projected correctly.
4. Right click the layer that was added to the Layers tab and select 'Export' and then 'Save Feature As' and a new tab will open.
5. Make sure that you select an ESRI Shapefile as the export format.
6. Select the location that you wish to save the Shapefile to.
7. Ensure that the CRS is set to WGS 84, this will be already set but double check.
8. Leave the rest as the default and click 'Ok'.

For more information on this, you can watch this short [video.](https://youtu.be/sQ2z-D8TN2E)

#### Convert GeoJSON to SHP:
This step is also important as GeoNode can store Shapefiles but not GeoJSON files therefore converting between the data formats is important and a useful trick to know. This is very similar to converting from a CSV file with a slight difference.
1. Open the GeoJSON file in QGIS by opening the 'Layer' tab and select 'Add Layer' then 'Add Vector Layer'.
2. Right click the layer that was added to the Layers tab and select 'Export' and then 'Save Feature As' and a new tab will open.
3. Make sure that you select an ESRI Shapefile as the export format.
4. Select the location that you wish to save the Shapefile to.
5. Ensure that the CRS is set to WGS 84.
6. Leave the rest as the default and click 'Ok'.

For more information on this, you can watch this short [video.](https://youtu.be/LC_fsxiPfTA)

### Editing Vector Data:
QGIS allows users to not only view data, but they can edit the data as well. Below are a few links that you can use to learn how to edit the data in QGIS. Editing data is a fairly easy enough process and with practise, it can become second nature. 

* [QGIS User Manual Editing Vector Data](https://docs.qgis.org/3.4/en/docs/user_manual/working_with_vector/editing_geometry_attributes.html)
* [QGIS Training Manual - Module 6: Creating Vector Data](https://docs.qgis.org/3.4/en/docs/training_manual/create_vector_data/index.html)
* [gvSIG Blog - Module 5: Create and editing vectorial layers](https://blog.gvsig.org/2017/07/03/learn-gis-for-free-module-5-create-and-editing-vectorial-layers/)
* [Edit Line or Polygon Feature in QGIS YouTube Video](https://www.youtube.com/watch?v=Ai3k7nLfkE8)
* [Digitsing and Editing Vector Data In QGIS YouTube Video](https://www.youtube.com/watch?v=c1kbNyHvWbo)
* [Editing misspelt names in the attribute table with QGIS YouTube Video](https://www.youtube.com/watch?v=Lia4rjnX2e8)

### Viewing or editing your GeoNode data in QGIS:
If you wish to create a more complex map with north arrows, a better legend or scale bar, then you can use QGIS to do so. QGIS has a built in GeoNode function that allows users to access the data they have stored without downloading it. Users can also edit this data and the changes will be reflected on GeoNode.

*To open the data in QGIS from GeoNode:*
1. Open a blank QGIS project.
2. Right click 'GeoNode' under the Browser tab and click 'New Connection'.
3. Give your connection a name that you will know what it means, the names does not have to be Stitching the City but STC works.
4. Enter `https://geocatalogue.co.za` under the URL and click 'Test Connection' to make sure it is connected.
5. If you expand the GeoNode connection, you will see the connection you created.
6. Expand that and you will see two more expandable options, 'WFS' and 'WMS'.
7. You can then select which layer which you want to add to your project by dragging it and dropping it in the project space.

For more information on this, you can watch this short [video.](https://youtu.be/or9cGe-tFFQ)

***WFS & WMS***
* Web Feature Service (WFS) allows the user to access and edit the raw data of a selected layer.
* Web Map Service (WMS) serves the layer as an image which means that the layer cannot be edited or the style can't be changed.

## Additional resources 
### EpiCollect5:
[Epicollect5 Data Collection User Guide](https://epicollect5.gitbooks.io/epicollect5-user-guide/content/)

### OpenStreetMap:
[OSM Beginners' Guide](https://wiki.openstreetmap.org/wiki/Beginners%27_guide)

[Learn OSM](https://learnosm.org/en/)

[Learn OSM Beginner’s Guide](https://learnosm.org/en/beginner/)

### GeoNode:
[GeoNode FAQs](http://geonode.org/faqs/)

[GeoNode Complete Users Guide](http://docs.geonode.org/en/2.10.x/usage/index.html)

### QGIS:
[QGIS User Guide](https://docs.qgis.org/3.4/en/docs/user_manual/)

[A Gentle Introduction to QGIS](https://docs.qgis.org/3.4/en/docs/gentle_gis_introduction/)

[QGIS Training Manual](https://docs.qgis.org/3.4/en/docs/training_manual/)

[Introducing GIS Tutorial with QGIS](https://www.osgeo.org/resources/introducing-gis-tutorial-with-qgis/)

[GIS Basics with QGIS](https://www.osgeo.org/resources/gis-basics-with-quantum-gis/)

[Learn GIS for free: The complete course](https://www.osgeo.org/resources/learn-gis-for-free-the-complete-course/)

### Other:

[Colour Brewer - Colour Advice for Maps](http://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3)

## Video Links 
Below are all the links to the videos that are in this Wiki.
### EpiCollect5:
[Setting up an EpiCollect5 Project](https://youtu.be/9NlfySzLdPY)

[Using the EpiCollect5 app](https://youtu.be/WQhUJfk_oPg)

[Viewing and downloading data from EpiCollect5](https://youtu.be/o1MgIdFqN5U)

### OpenStreetMap (OSM):
[Creating an account with OSM](https://youtu.be/VVBw5BfBOXY)

[Mapping buildings in OSM](https://youtu.be/Lf4UjJqBsvU)

### Using GeoNode for your data:
[Uploading a layer to GeoNode](https://youtu.be/LJ9kXhONHKY)

[Viewing and downloading a layer in GeoNode](https://youtu.be/OlCdw_c2azk)

[Creating, editing and downloading a map in GeoNode](https://youtu.be/mZzElwASL1M)

[Editing metadata in GeoNode](https://youtu.be/Kdo5caVuwGc)

### QGIS:
[Converting .CSV files to Shapefiles (.shp) in QGIS](https://youtu.be/sQ2z-D8TN2E)

[Converting GeoJSOn files to Shapefiles (.shp) in QGIS](https://youtu.be/LC_fsxiPfTA)

[Opening data from GeoNode in QGIS](https://youtu.be/or9cGe-tFFQ)
